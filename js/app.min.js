/*! 
* element-seed-project - v1.4.0 
* Â© Copyright 2016  Hewlett-Packard Development Company, L.P
 */
angular.module("app",["hpe.elements","app.challenge"]).run(function(a,b,c){a.$state=b,a.$stateParams=c}),angular.module("app").config(["$stateProvider","$urlRouterProvider","$breadcrumbProvider",function(a,b,c){c.setOptions({includeAbstract:!0}),b.otherwise("/challenge/bike"),a.state("challenge",{abstract:"true",url:"/challenge",template:"<ui-view />",ncyBreadcrumb:{label:"Hewlett Packard Enterprise"}}).state("challenge.bike",{url:"/bike",templateUrl:"app/views/challenge/challenge.html",controller:"ChallengeCtrl as vm",ncyBreadcrumb:{label:"Bike Challenge 2016"},data:{pageTitle:"HPE Bike Challenge 2016"}}).state("challenge.update",{url:"/update",templateUrl:"app/views/update/update.html",controller:"UpdateCtrl as vm",ncyBreadcrumb:{label:"Bike Challenge 2016"},data:{pageTitle:"HPE Bike Challenge 2016"}})}]),function(){angular.module("app.challenge",[])}(),function(){function a(a,b,c){function d(a){return b.trustAsResourceUrl("http://www.ustream.tv/embed/"+a+"?html5ui&autoplay=true&mute=true")}function e(){h.teams.forEach(function(a){a.winning=!1});var a=h.teams.slice(0).sort(function(a,b){return a.distance<b.distance});0!==a[0].distance&&(a[0].winning=!0)}function f(){var a=(new Date).getTime(),b=14794056e5,c=(b-a)/1e3,d=parseInt(c/3600),e=parseInt(c%3600/60),f=parseInt(60*(c%3600/60-e));d=Math.max(d,0),e=Math.max(e,0),f=Math.max(f,0),1===e.toString().length&&(e="0"+e),1===f.toString().length&&(f="0"+f),h.timeRemaining={hours:d,minutes:e,seconds:f}}function g(){var a=h.teams.indexOf(h.activeTeam);a++,a>=h.teams.length&&(a=0),h.activeTeam=h.teams[a]}var h=this,i=6e4,j=firebase.database().ref("Teams"),k=firebase.database().ref("Chat"),l=firebase.database().ref("Streams");h.messages={},h.name="",h.message="",h.teams=[{name:"Belfast",distance:0,stream:d("0"),winning:!1},{name:"Cambridge",distance:0,stream:d("0"),winning:!1},{name:"Canberra",distance:0,stream:d("0"),winning:!1},{name:"Southborough",distance:0,stream:d("0"),winning:!1},{name:"Pleasanton",distance:0,stream:d("0"),winning:!1},{name:"Bangalore",distance:0,stream:d("0"),winning:!1}],h.activeTeam=h.teams[0],j.on("value",function(a){var b=a.val();h.teams.forEach(function(a){a.distance=b[a.name]}),e(),c.$$phase||c.$digest()}),k.on("value",function(a){var b=a.val();h.messages=b,c.$$phase||c.$digest()}),l.on("value",function(a){var b=a.val();for(var e in b){for(var f=0;f<h.teams.length;f++)if(h.teams[f].name===e){h.teams[f].stream=d(b[e]);break}c.$$phase||c.$digest()}}),h.sendMessage=function(){var a=k.push(),b=(new Date).toLocaleTimeString()+" "+(new Date).toLocaleDateString();a.set({Author:h.name,Message:h.message,Date:b}),h.message=""},f(),a(f,1e3);var m=a(g,i);h.selectTeam=function(b){h.activeTeam=b,a.cancel(m),m=a(g,i)}}angular.module("app.challenge").controller("ChallengeCtrl",a),a.$inject=["$interval","$sce","$scope"]}(),function(){function a(a,b,c){}angular.module("app").controller("PageHeaderCtrl",a),a.$inject=["$scope","$rootScope","$state"]}(),function(){function a(a){var b=this,c=firebase.database().ref("Teams"),d=firebase.database().ref("Streams");b.teams={Belfast:0,Cambridge:0,Canberra:0,Southborough:0,Pleasanton:0,Bangalore:0},b.streams={},c.on("value",function(c){var d=c.val();for(var e in d)b.teams[e]=d[e];a.$$phase||a.$digest()}),d.on("value",function(c){b.streams=c.val(),a.$$phase||a.$digest()}),b.update=function(){c.set(b.teams)},b.updateStreams=function(){d.set(b.streams)}}angular.module("app").controller("UpdateCtrl",a),a.$inject=["$scope"]}();